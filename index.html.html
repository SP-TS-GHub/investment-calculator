<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investment Returns Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #1a1a1a;
            color: #ffffff;
            margin: 0;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            color: #ffffff;
            margin-bottom: 30px;
        }
        
        .input-section {
            background-color: #2d2d2d;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
        }
        
        label {
            margin-bottom: 5px;
            font-weight: bold;
            color: #cccccc;
        }
        
        input {
            padding: 8px;
            border: 1px solid #555;
            border-radius: 4px;
            background-color: #3d3d3d;
            color: #ffffff;
            font-size: 14px;
        }
        
        input:focus {
            outline: none;
            border-color: #007acc;
        }
        
        .chart-container {
            background-color: #2d2d2d;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .chart-title {
            background-color: #1a1a1a;
            padding: 15px 20px;
            font-size: 18px;
            font-weight: bold;
            border-bottom: 1px solid #444;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background-color: #2d2d2d;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: right;
            border-bottom: 1px solid #444;
        }
        
        th {
            background-color: #1a1a1a;
            font-weight: bold;
            color: #ffffff;
        }
        
        td:first-child, th:first-child {
            text-align: left;
        }
        
        .total-row {
            background-color: #333;
            font-weight: bold;
        }
        
        .positive {
            color: #4CAF50;
        }
        
        .multiplier {
            color: #FFA726;
        }
        
        .dash {
            color: #666;
        }
        
        .instructions {
            background-color: #2d2d2d;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #007acc;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Investment Returns Calculator</h1>
        
        <div class="instructions">
            <strong>Instructions:</strong> Modify the input values below to see how they affect the investment returns. The table will update automatically with calculated totals and ROI percentages.
        </div>
        
        <div class="input-section">
            <h3>Investment Parameters</h3>
            <div class="input-grid">
                <div class="input-group">
                    <label for="initial-invest">Initial Investment (K):</label>
                    <input type="number" id="initial-invest" value="750" min="0" step="1">
                </div>
                <div class="input-group">
                    <label for="year2-invest">Year 2 Investment (K):</label>
                    <input type="number" id="year2-invest" value="900" min="0" step="1">
                </div>
                <div class="input-group">
                    <label for="year3-invest">Year 3 Investment (K):</label>
                    <input type="number" id="year3-invest" value="850" min="0" step="1">
                </div>
            </div>
            
            <h4>Year 1 Returns</h4>
            <div class="input-grid">
                <div class="input-group">
                    <label for="year1-i1">Return from I₁ (K):</label>
                    <input type="number" id="year1-i1" value="600" min="0" step="1">
                </div>
            </div>
            
            <h4>Year 2 Returns</h4>
            <div class="input-grid">
                <div class="input-group">
                    <label for="year2-i1">Return from I₁ (K):</label>
                    <input type="number" id="year2-i1" value="1875" min="0" step="1">
                </div>
                <div class="input-group">
                    <label for="year2-i2">Return from I₂ (K):</label>
                    <input type="number" id="year2-i2" value="2250" min="0" step="1">
                </div>
            </div>
            
            <h4>Year 3 Returns</h4>
            <div class="input-grid">
                <div class="input-group">
                    <label for="year3-i1">Return from I₁ (K):</label>
                    <input type="number" id="year3-i1" value="5250" min="0" step="1">
                </div>
                <div class="input-group">
                    <label for="year3-i2">Return from I₂ (K):</label>
                    <input type="number" id="year3-i2" value="6300" min="0" step="1">
                </div>
                <div class="input-group">
                    <label for="year3-i3">Return from I₃ (K):</label>
                    <input type="number" id="year3-i3" value="6800" min="0" step="1">
                </div>
            </div>
        </div>
        
        <div class="chart-container">
            <div class="chart-title">3) Aggregate by Calendar Year</div>
            <table>
                <thead>
                    <tr>
                        <th>Year</th>
                        <th>Return from I₁</th>
                        <th>Return from I₂</th>
                        <th>Return from I₃</th>
                        <th>Total Return</th>
                        <th>Cum. Invest</th>
                        <th>Annual ROI</th>
                    </tr>
                </thead>
                <tbody id="results-table">
                    <!-- Table content will be populated by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Get all input elements
        const inputs = {
            initialInvest: document.getElementById('initial-invest'),
            year2Invest: document.getElementById('year2-invest'),
            year3Invest: document.getElementById('year3-invest'),
            year1I1: document.getElementById('year1-i1'),
            year2I1: document.getElementById('year2-i1'),
            year2I2: document.getElementById('year2-i2'),
            year3I1: document.getElementById('year3-i1'),
            year3I2: document.getElementById('year3-i2'),
            year3I3: document.getElementById('year3-i3')
        };

        function formatNumber(num) {
            return num.toLocaleString();
        }

        function formatROI(roi, multiplier) {
            return `${multiplier.toFixed(2)}× (${Math.round(roi)}%)`;
        }

        function updateTable() {
            const values = {};
            for (let key in inputs) {
                values[key] = parseFloat(inputs[key].value) || 0;
            }

            // Calculate cumulative investments
            const cumInvest1 = values.initialInvest;
            const cumInvest2 = values.initialInvest + values.year2Invest;
            const cumInvest3 = values.initialInvest + values.year2Invest + values.year3Invest;

            // Calculate total returns
            const totalReturn1 = values.year1I1;
            const totalReturn2 = values.year2I1 + values.year2I2;
            const totalReturn3 = values.year3I1 + values.year3I2 + values.year3I3;

            // Calculate ROI
            const roi1 = (totalReturn1 / cumInvest1) * 100;
            const roi2 = (totalReturn2 / cumInvest2) * 100;
            const roi3 = (totalReturn3 / cumInvest3) * 100;

            // Calculate multipliers
            const mult1 = totalReturn1 / cumInvest1;
            const mult2 = totalReturn2 / cumInvest2;
            const mult3 = totalReturn3 / cumInvest3;

            // Total calculations
            const totalReturns = totalReturn1 + totalReturn2 + totalReturn3;
            const totalInvestment = cumInvest3;
            const totalROI = (totalReturns / totalInvestment) * 100;
            const totalMult = totalReturns / totalInvestment;

            const tableBody = document.getElementById('results-table');
            tableBody.innerHTML = `
                <tr>
                    <td>1</td>
                    <td class="positive">${formatNumber(values.year1I1)} K</td>
                    <td class="dash">–</td>
                    <td class="dash">–</td>
                    <td class="positive">${formatNumber(totalReturn1)} K</td>
                    <td>${formatNumber(cumInvest1)} K</td>
                    <td class="multiplier">${formatROI(roi1, mult1)}</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td class="positive">${formatNumber(values.year2I1)} K</td>
                    <td class="positive">${formatNumber(values.year2I2)} K</td>
                    <td class="dash">–</td>
                    <td class="positive">${formatNumber(totalReturn2)} K</td>
                    <td>${formatNumber(cumInvest2)} K</td>
                    <td class="multiplier">${formatROI(roi2, mult2)}</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td class="positive">${formatNumber(values.year3I1)} K</td>
                    <td class="positive">${formatNumber(values.year3I2)} K</td>
                    <td class="positive">${formatNumber(values.year3I3)} K</td>
                    <td class="positive">${formatNumber(totalReturn3)} K</td>
                    <td>${formatNumber(cumInvest3)} K</td>
                    <td class="multiplier">${formatROI(roi3, mult3)}</td>
                </tr>
                <tr class="total-row">
                    <td><strong>Total</strong></td>
                    <td class="dash">–</td>
                    <td class="dash">–</td>
                    <td class="dash">–</td>
                    <td class="positive"><strong>${formatNumber(totalReturns)} K</strong></td>
                    <td><strong>${formatNumber(totalInvestment)} K</strong></td>
                    <td class="multiplier"><strong>${formatROI(totalROI, totalMult)}</strong></td>
                </tr>
            `;
        }

        // Add event listeners to all inputs
        for (let key in inputs) {
            inputs[key].addEventListener('input', updateTable);
        }

        // Initial table population
        updateTable();
    </script>
</body>
</html>